<div class="container mt-5">
  <div class="row">

    <div class="col-12">
      <div class="card-body">
        <h5 class="card-title"><%= @user.name %></h5>
        <p class="card-text">
          <%= render 'devise/shared/stats' %>
          <%= render 'devise/shared/follow_form' if user_signed_in? %>
        </p>
        <% if user_signed_in? %>
          <% if @user.id == current_user.id %>
            <%= link_to "アカウント編集", edit_user_registration_path, class: "btn btn-primary btn-sm" %>
            <%= link_to "タスク一覧", root_path, class: "btn btn-primary btn-sm" %>
          <% else %>
            <%= link_to "マイページ", profile_path(current_user.id), class: "btn btn-primary btn-sm" %>
          <% end %>
        <% end %>
      </div>

      <br><br>

      <form class="form-inline my-2 my-lg-0">
        <%= form_tag(profile_path, method: :get, class: "form-inline my-2 my-lg-0") do %>
          <%= text_field_tag :search, "", class: "form-control mr-sm-2", prompt:{}, placeholder: "ユーザー名orメールアドレス" %>
          <%= submit_tag 'Search', name: nil, class: "btn btn-outline-primary my-2 my-sm-0" %>
        <% end %>
      </form>
      <br>
      <table class="table">
        <thead style="background: dodgerblue; color: white;">
          <tr>
            <th scope="col">ID：</th>
            <th scope="col">ユーザーネーム：</th>
            <th scope="col">フォロー：</th>
            <th scope="col">フォロワー：</th>
          </tr>
        </thead>
        <% @users.each do |user| %>
          <% if user_signed_in? %>
            <% if user.id != current_user.id %>
              <tbody>
                <tr>
                  <th scope="row"><%= user.id %></th>
                  <td><%= link_to user.name, profile_path(user) %></td>
                  <td><%= user.followings.count %></td>
                  <td><%= user.followers.count %></td>
                </tr>
              </tbody>
            <% end %>
          <% end %>
        <% end %>
      </table>
    </div>

  </div>
</div>
